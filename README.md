# 3X-UI VPN Panel - Kubernetes Deployment

## üö® –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å CI/CD: –¢–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

**–í–Ω–∏–º–∞–Ω–∏–µ!** –í—Å–µ workflows GitHub Actions –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é** (—á–µ—Ä–µ–∑ Actions ‚Üí Run workflow –ª–∏–±–æ —á–µ—Ä–µ–∑ GitHub CLI). –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç production –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–ª–∏ —Å–ª—É—á–∞–π–Ω—ã–µ –¥–µ–ø–ª–æ–∏. –°–º. [docs/SECURITY.md](docs/SECURITY.md).

## üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –≤ GitHub

**–ù–æ–≤–æ–µ!** –ë—ç–∫–∞–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ GitHub (–≤–µ—Ç–∫–∞ `backups`) –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–í–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ PV/PVC
- ‚úÖ **Git-–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∫–∞–∂–¥—ã–π –±—ç–∫–∞–ø –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º commit
- ‚úÖ **–õ–µ–≥–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî `git clone -b backups`
- ‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ 30 –±—ç–∫–∞–ø–æ–≤** –≤ GitHub + 7 –¥–Ω–µ–π –≤ PVC

### –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# 1. –°–æ–∑–¥–∞—Ç—å GitHub PAT: https://github.com/settings/tokens
# Permissions: repo (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)

# 2. –°–æ–∑–¥–∞—Ç—å Secret
kubectl create secret generic github-backup-secret \
  --from-literal=token='ghp_YOUR_TOKEN' \
  -n xui-vpn

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å CronJob
kubectl apply -f manifests/cronjob-backup.yaml

# 4. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
kubectl create job --from=cronjob/xui-selfbackup manual-backup-test -n xui-vpn
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [docs/BACKUP_TO_GITHUB.md](docs/BACKUP_TO_GITHUB.md)
**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ encryption**: [docs/ETCD_ENCRYPTION.md](docs/ETCD_ENCRYPTION.md)

**–ü—Ä–æ—Å–º–æ—Ç—Ä –±—ç–∫–∞–ø–æ–≤**: https://github.com/KomarovAI/3xui-k8s-statefulset/tree/backups

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Traefik + HTTPS (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤—ã–¥–∞—á—É DNS –∏ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** —á–µ—Ä–µ–∑ Traefik:

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π DNS** —á–µ—Ä–µ–∑ nip.io (–Ω–µ –Ω—É–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω!)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ HTTPS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –æ—Ç Let's Encrypt
- ‚úÖ **–†–µ–¥–∏—Ä–µ–∫—Ç HTTP ‚Üí HTTPS** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ
- ‚úÖ **–ù—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç—ã 80 –∏ 443** (–¥–ª—è Traefik)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç
   ‚Üì
DNS: xui.${SERVER_IP}.nip.io ‚Üí ${SERVER_IP}
   ‚Üì
Traefik (–ø–æ—Ä—Ç—ã 80/443)
   ‚Üì Let's Encrypt SSL
IngressRoute ‚Üí 3X-UI Service (–ø–æ—Ä—Ç 2053)
   ‚Üì
3X-UI Pod
```
### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç ... (–æ—Å—Ç–∞–ª—å–Ω–æ–µ –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ, —É–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–µ security best practices, encryption, ResourceQuota, NetworkPolicy)

# (–í –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–µ–∫—Ü–∏—è—Ö –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—è—Å–Ω–µ–Ω–∏—è –ø—Ä–æ secrets —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ GitHub Secrets, encryption at rest, –Ω–æ–≤—ã–µ NetworkPolicies, ResourceQuota)
